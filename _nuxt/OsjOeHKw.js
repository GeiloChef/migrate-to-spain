import{l as b,f as $,m as A,V as E,p as S,c as x,o as p,a as l,b as L,z as R,t as y,h as Y,k as r,F as N,j as O,n as C,i as I,x as P,w as q,s as M,A as j,T as D}from"#entry";const F={class:"bg-white/95 backdrop-blur-sm border border-yellow-200 rounded-lg shadow-lg p-3 max-w-56 2xl:max-w-64 2xl:p-4"},U={class:"flex items-center gap-2 mb-3 pb-2 border-b border-yellow-100"},G={class:"font-medium text-gray-800 text-xs 2xl:text-sm"},J={class:"space-y-0.5 max-h-80 overflow-y-auto"},K={key:0,class:"!text-xs text-gray-500 px-2 py-1"},Q=["data-heading-id","onClick"],W={class:"mt-3 pt-2 border-t border-yellow-100"},X={class:"flex items-center justify-between text-xs text-gray-500 mb-1"},Z={class:"w-full bg-gray-200 rounded-full h-1"},nt={__name:"TableOfContents",setup(z){const a=b([]),c=b(""),u=b(0),f=$(()=>({})),v=n=>"",_=()=>{document.querySelectorAll("h2").forEach((t,e)=>{const o=t.closest('.absolute.inset-0, .absolute.flex.items-end, [class*="hero"], .bg-gradient-to-t'),s=t.closest("nav, .navigation, header"),i=t.closest("header, .timeline-header, .border-b.border-spain-yellow\\/30"),w=t.closest('[class*="table-of-contents"], .table-of-contents, .toc, .fixed.left-6');if(o||s||i||w)return;if(!t.id){let d=(t.textContent?.trim()||`heading-${e}`).toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").substring(0,50);d||(d=`heading-${e}`);let B=1,V=d;for(;document.getElementById(d);)d=`${V}-${B}`,B++;t.id=d}const T={id:t.id,text:t.textContent?.trim()||"",level:parseInt(t.tagName.charAt(1))};a.value.push(T)})},m=n=>{let t=document.getElementById(n);if(!t){const e=document.querySelectorAll("h2"),o=Array.from(e).find(s=>{const i=s.textContent?.trim().toLowerCase(),w=n.replace(/-/g," ").toLowerCase();return i===w});o&&(t=o)}if(t){const e=t.getBoundingClientRect(),o=window.pageYOffset||document.documentElement.scrollTop,s=e.top+o-120;window.scrollTo({top:s,behavior:"smooth"}),c.value=n}else window.scrollTo({top:0,behavior:"smooth"})},g=()=>{const n=window.scrollY+200;let t=null;for(let e=0;e<a.value.length;e++){const o=document.getElementById(a.value[e].id);if(o)if(o.getBoundingClientRect().top+window.scrollY<=n)t=a.value[e].id;else break}t&&(c.value=t,h(t))},h=n=>{E(()=>{const t=document.querySelector(".max-h-80.overflow-y-auto"),e=t?.querySelector(`button[data-heading-id="${n}"]`);if(t&&e){const o=t.getBoundingClientRect(),s=e.getBoundingClientRect(),i=s.top<o.top,w=s.bottom>o.bottom;if(i||w){const T=e.offsetTop-t.clientHeight/2+e.clientHeight/2;t.scrollTo({top:T,behavior:"smooth"})}}})},H=()=>{const n=window.scrollY,t=document.documentElement.scrollHeight-window.innerHeight,e=n/t*100;u.value=Math.min(100,Math.max(0,e))},k=()=>{g(),H()};return A(()=>{E(()=>{_(),g(),H(),window.addEventListener("scroll",k)})}),S(()=>{window.removeEventListener("scroll",k)}),(n,t)=>{const e=R;return p(),x("div",{class:"hidden lg:block fixed z-40 left-4 top-36",style:I(r(f))},[l("div",F,[l("div",U,[L(e,{name:"heroicons:list-bullet",class:"w-4 h-4 text-yellow-600"}),l("h3",G,y(n.$t("ui.tableOfContents.title")),1)]),l("nav",J,[r(a).length===0?(p(),x("div",K,y(n.$t("ui.tableOfContents.noHeadings")),1)):Y("",!0),(p(!0),x(N,null,O(r(a),(o,s)=>(p(),x("button",{key:s,"data-heading-id":o.id,onClick:i=>m(o.id),class:C(["block w-full text-left px-2 py-1.5 rounded text-xs 2xl:text-sm transition-all duration-200 cursor-pointer font-semibold",r(c)===o.id?"bg-yellow-200 text-yellow-900 border-l-2 border-yellow-500":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"])},[l("span",{class:C(["block truncate",v(o.level)])},y(o.text),3)],10,Q))),128))]),l("div",W,[l("div",X,[l("span",null,y(Math.round(r(u)))+"%",1)]),l("div",Z,[l("div",{class:"bg-yellow-400 h-1 rounded-full transition-all duration-300",style:I({width:`${r(u)}%`})},null,4)])])])],4)}}},tt=["aria-label"],st={__name:"BackToTop",setup(z){const a=b(!1),c=b(!1),u=$(()=>"right-8 lg:right-[calc(50vw-32rem+2rem)]"),f=()=>{const m=window.scrollY,g=window.innerHeight,h=document.documentElement.scrollHeight;c.value=m+g>=h-100},v=()=>{a.value=window.scrollY>300,f()},_=()=>{window.scrollTo({top:0,behavior:"smooth"})};return A(()=>{window.addEventListener("scroll",v),f()}),S(()=>{window.removeEventListener("scroll",v)}),(m,g)=>{const h=R;return p(),P(D,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-75 translate-y-4","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-75 translate-y-4"},{default:q(()=>[M(l("button",{onClick:_,class:C(["fixed z-50 bg-white/95 backdrop-blur-sm border-2 border-yellow-400 hover:border-yellow-500 text-gray-800 hover:text-gray-900 rounded-full w-12 h-12 flex items-center justify-center shadow-xl hover:shadow-2xl transition-all duration-300 group cursor-pointer",[r(u),r(c)?"bottom-20 md:bottom-8":"bottom-8"]]),"aria-label":m.$t("ui.backToTop.ariaLabel")},[L(h,{name:"heroicons:arrow-up",class:"w-5 h-5 transition-transform duration-300 group-hover:-translate-y-1"})],10,tt),[[j,r(a)]])]),_:1})}}};export{nt as _,st as a};
